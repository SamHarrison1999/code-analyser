[
  {
    "line": 4,
    "text": "from zvt.factors.ma.ma_factor import CrossMaFactor",
    "annotation": "\u2705 Best Practice: Grouping imports from the same module together improves readability.",
    "confidence": 0.5,
    "tokens": [
      6738,
      1976,
      36540,
      13,
      22584,
      669,
      13,
      2611,
      13,
      2611,
      62,
      31412,
      1330,
      6372,
      21467,
      41384
    ],
    "start_token": 0,
    "end_token": 16,
    "annotation_tokens": [
      26486,
      227,
      6705,
      19939,
      25,
      4912,
      278,
      17944,
      422,
      262,
      976,
      8265,
      1978,
      19575,
      1100,
      1799,
      13
    ],
    "label": "best_practice",
    "reason": "Grouping imports from the same module together improves readability."
  },
  {
    "line": 6,
    "text": "",
    "annotation": "\u2705 Best Practice: Calling initialization functions at the start of the script ensures the context is set up before use.",
    "confidence": 0.5,
    "tokens": [],
    "start_token": 16,
    "end_token": 16,
    "annotation_tokens": [
      26486,
      227,
      6705,
      19939,
      25,
      32677,
      37588,
      5499,
      379,
      262,
      923,
      286,
      262,
      4226,
      19047,
      262,
      4732,
      318,
      900,
      510,
      878,
      779,
      13
    ],
    "label": "best_practice",
    "reason": "Calling initialization functions at the start of the script ensures the context is set up before use."
  },
  {
    "line": 8,
    "text": "",
    "annotation": "\ud83e\udde0 ML Signal: Use of a specific provider and codes for data retrieval",
    "confidence": 1.0,
    "tokens": [],
    "start_token": 16,
    "end_token": 16,
    "annotation_tokens": [
      8582,
      100,
      254,
      10373,
      26484,
      25,
      5765,
      286,
      257,
      2176,
      10131,
      290,
      12416,
      329,
      1366,
      45069
    ],
    "label": "ml_signal",
    "reason": "Use of a specific provider and codes for data retrieval"
  },
  {
    "line": 19,
    "text": "        keep_window=30,",
    "annotation": "\ud83e\udde0 ML Signal: Printing the tail of a DataFrame for inspection",
    "confidence": 0.5,
    "tokens": [
      220,
      220,
      220,
      220,
      220,
      220,
      220,
      1394,
      62,
      17497,
      28,
      1270,
      11
    ],
    "start_token": 16,
    "end_token": 29,
    "annotation_tokens": [
      8582,
      100,
      254,
      10373,
      26484,
      25,
      44118,
      262,
      7894,
      286,
      257,
      6060,
      19778,
      329,
      15210
    ],
    "label": "ml_signal",
    "reason": "Printing the tail of a DataFrame for inspection"
  },
  {
    "line": 21,
    "text": "        adjust_type=\"qfq\",",
    "annotation": "\ud83e\udde0 ML Signal: Accessing specific columns in a DataFrame",
    "confidence": 0.5,
    "tokens": [
      220,
      220,
      220,
      220,
      220,
      220,
      220,
      4532,
      62,
      4906,
      2625,
      80,
      69,
      80,
      1600
    ],
    "start_token": 29,
    "end_token": 44,
    "annotation_tokens": [
      8582,
      100,
      254,
      10373,
      26484,
      25,
      8798,
      278,
      2176,
      15180,
      287,
      257,
      6060,
      19778
    ],
    "label": "ml_signal",
    "reason": "Accessing specific columns in a DataFrame"
  },
  {
    "line": 25,
    "text": "",
    "annotation": "\u26a0\ufe0f SAST Risk (Low): Use of assert statements for testing",
    "confidence": 0.5,
    "tokens": [],
    "start_token": 44,
    "end_token": 44,
    "annotation_tokens": [
      158,
      248,
      254,
      37929,
      311,
      11262,
      19602,
      357,
      20535,
      2599,
      5765,
      286,
      6818,
      6299,
      329,
      4856
    ],
    "label": "sast_risk",
    "severity": "Low",
    "reason": "Use of assert statements for testing"
  },
  {
    "line": 27,
    "text": "    ma5 = factor.factor_df[\"ma5\"]",
    "annotation": "\u26a0\ufe0f SAST Risk (Low): Use of assert statements for testing",
    "confidence": 0.5,
    "tokens": [
      220,
      220,
      220,
      17266,
      20,
      796,
      5766,
      13,
      31412,
      62,
      7568,
      14692,
      2611,
      20,
      8973
    ],
    "start_token": 44,
    "end_token": 59,
    "annotation_tokens": [
      158,
      248,
      254,
      37929,
      311,
      11262,
      19602,
      357,
      20535,
      2599,
      5765,
      286,
      6818,
      6299,
      329,
      4856
    ],
    "label": "sast_risk",
    "severity": "Low",
    "reason": "Use of assert statements for testing"
  },
  {
    "line": 29,
    "text": "    ma30 = factor.factor_df[\"ma30\"]",
    "annotation": "\u26a0\ufe0f SAST Risk (Low): Use of assert statements for testing",
    "confidence": 0.5,
    "tokens": [
      220,
      220,
      220,
      17266,
      1270,
      796,
      5766,
      13,
      31412,
      62,
      7568,
      14692,
      2611,
      1270,
      8973
    ],
    "start_token": 59,
    "end_token": 74,
    "annotation_tokens": [
      158,
      248,
      254,
      37929,
      311,
      11262,
      19602,
      357,
      20535,
      2599,
      5765,
      286,
      6818,
      6299,
      329,
      4856
    ],
    "label": "sast_risk",
    "severity": "Low",
    "reason": "Use of assert statements for testing"
  },
  {
    "line": 31,
    "text": "    assert round(ma5.loc[(\"stock_sz_000338\", \"2019-06-10\")], 2) <= 11.23",
    "annotation": "\ud83e\udde0 ML Signal: Moving the factor to a new timestamp",
    "confidence": 1.0,
    "tokens": [
      220,
      220,
      220,
      6818,
      2835,
      7,
      2611,
      20,
      13,
      17946,
      58,
      7203,
      13578,
      62,
      82,
      89,
      62,
      830,
      28460,
      1600,
      366,
      23344,
      12,
      3312,
      12,
      940,
      4943,
      4357,
      362,
      8,
      19841,
      1367,
      13,
      1954
    ],
    "start_token": 74,
    "end_token": 108,
    "annotation_tokens": [
      8582,
      100,
      254,
      10373,
      26484,
      25,
      26768,
      262,
      5766,
      284,
      257,
      649,
      41033
    ],
    "label": "ml_signal",
    "reason": "Moving the factor to a new timestamp"
  },
  {
    "line": 33,
    "text": "    assert round(ma30.loc[(\"stock_sz_000338\", \"2019-06-10\")], 2) <= 11.52",
    "annotation": "\ud83e\udde0 ML Signal: Re-accessing specific columns after moving the factor",
    "confidence": 0.5,
    "tokens": [
      220,
      220,
      220,
      6818,
      2835,
      7,
      2611,
      1270,
      13,
      17946,
      58,
      7203,
      13578,
      62,
      82,
      89,
      62,
      830,
      28460,
      1600,
      366,
      23344,
      12,
      3312,
      12,
      940,
      4943,
      4357,
      362,
      8,
      19841,
      1367,
      13,
      4309
    ],
    "start_token": 108,
    "end_token": 142,
    "annotation_tokens": [
      8582,
      100,
      254,
      10373,
      26484,
      25,
      797,
      12,
      15526,
      278,
      2176,
      15180,
      706,
      3867,
      262,
      5766
    ],
    "label": "ml_signal",
    "reason": "Re-accessing specific columns after moving the factor"
  },
  {
    "line": 33,
    "text": "    assert round(ma30.loc[(\"stock_sz_000338\", \"2019-06-10\")], 2) <= 11.52",
    "annotation": "\u26a0\ufe0f SAST Risk (Low): Use of assert statements for testing",
    "confidence": 0.5,
    "tokens": [
      220,
      220,
      220,
      6818,
      2835,
      7,
      2611,
      1270,
      13,
      17946,
      58,
      7203,
      13578,
      62,
      82,
      89,
      62,
      830,
      28460,
      1600,
      366,
      23344,
      12,
      3312,
      12,
      940,
      4943,
      4357,
      362,
      8,
      19841,
      1367,
      13,
      4309
    ],
    "start_token": 142,
    "end_token": 176,
    "annotation_tokens": [
      158,
      248,
      254,
      37929,
      311,
      11262,
      19602,
      357,
      20535,
      2599,
      5765,
      286,
      6818,
      6299,
      329,
      4856
    ],
    "label": "sast_risk",
    "severity": "Low",
    "reason": "Use of assert statements for testing"
  },
  {
    "line": 43,
    "text": "",
    "annotation": "\u26a0\ufe0f SAST Risk (Low): Use of assert statements for testing",
    "confidence": 0.5,
    "tokens": [],
    "start_token": 176,
    "end_token": 176,
    "annotation_tokens": [
      158,
      248,
      254,
      37929,
      311,
      11262,
      19602,
      357,
      20535,
      2599,
      5765,
      286,
      6818,
      6299,
      329,
      4856
    ],
    "label": "sast_risk",
    "severity": "Low",
    "reason": "Use of assert statements for testing"
  },
  {
    "line": 43,
    "text": "",
    "annotation": "\u26a0\ufe0f SAST Risk (Low): Use of assert statements for testing",
    "confidence": 0.5,
    "tokens": [],
    "start_token": 176,
    "end_token": 176,
    "annotation_tokens": [
      158,
      248,
      254,
      37929,
      311,
      11262,
      19602,
      357,
      20535,
      2599,
      5765,
      286,
      6818,
      6299,
      329,
      4856
    ],
    "label": "sast_risk",
    "severity": "Low",
    "reason": "Use of assert statements for testing"
  },
  {
    "line": 33,
    "text": "    assert round(ma30.loc[(\"stock_sz_000338\", \"2019-06-10\")], 2) <= 11.52",
    "annotation": "\ud83e\udde0 ML Signal: Usage of a specific provider and codes for data retrieval",
    "confidence": 1.0,
    "tokens": [
      220,
      220,
      220,
      6818,
      2835,
      7,
      2611,
      1270,
      13,
      17946,
      58,
      7203,
      13578,
      62,
      82,
      89,
      62,
      830,
      28460,
      1600,
      366,
      23344,
      12,
      3312,
      12,
      940,
      4943,
      4357,
      362,
      8,
      19841,
      1367,
      13,
      4309
    ],
    "start_token": 176,
    "end_token": 210,
    "annotation_tokens": [
      8582,
      100,
      254,
      10373,
      26484,
      25,
      29566,
      286,
      257,
      2176,
      10131,
      290,
      12416,
      329,
      1366,
      45069
    ],
    "label": "ml_signal",
    "reason": "Usage of a specific provider and codes for data retrieval"
  },
  {
    "line": 44,
    "text": "",
    "annotation": "\u2705 Best Practice: Use of print for debugging purposes",
    "confidence": 0.5,
    "tokens": [],
    "start_token": 210,
    "end_token": 210,
    "annotation_tokens": [
      26486,
      227,
      6705,
      19939,
      25,
      5765,
      286,
      3601,
      329,
      28769,
      4959
    ],
    "label": "best_practice",
    "reason": "Use of print for debugging purposes"
  },
  {
    "line": 46,
    "text": "    factor = TechnicalFactor(",
    "annotation": "\ud83e\udde0 ML Signal: Accessing specific columns from a DataFrame",
    "confidence": 1.0,
    "tokens": [
      220,
      220,
      220,
      5766,
      796,
      20671,
      41384,
      7
    ],
    "start_token": 210,
    "end_token": 218,
    "annotation_tokens": [
      8582,
      100,
      254,
      10373,
      26484,
      25,
      8798,
      278,
      2176,
      15180,
      422,
      257,
      6060,
      19778
    ],
    "label": "ml_signal",
    "reason": "Accessing specific columns from a DataFrame"
  },
  {
    "line": 50,
    "text": "        end_timestamp=\"2019-06-10\",",
    "annotation": "\u26a0\ufe0f SAST Risk (Low): Potential risk if the DataFrame structure changes",
    "confidence": 0.5,
    "tokens": [
      220,
      220,
      220,
      220,
      220,
      220,
      220,
      886,
      62,
      16514,
      27823,
      2625,
      23344,
      12,
      3312,
      12,
      940,
      1600
    ],
    "start_token": 218,
    "end_token": 236,
    "annotation_tokens": [
      158,
      248,
      254,
      37929,
      311,
      11262,
      19602,
      357,
      20535,
      2599,
      32480,
      2526,
      611,
      262,
      6060,
      19778,
      4645,
      2458
    ],
    "label": "sast_risk",
    "severity": "Low",
    "reason": "Potential risk if the DataFrame structure changes"
  },
  {
    "line": 52,
    "text": "        keep_window=None,",
    "annotation": "\u26a0\ufe0f SAST Risk (Low): Potential risk if the DataFrame structure changes",
    "confidence": 0.5,
    "tokens": [
      220,
      220,
      220,
      220,
      220,
      220,
      220,
      1394,
      62,
      17497,
      28,
      14202,
      11
    ],
    "start_token": 236,
    "end_token": 249,
    "annotation_tokens": [
      158,
      248,
      254,
      37929,
      311,
      11262,
      19602,
      357,
      20535,
      2599,
      32480,
      2526,
      611,
      262,
      6060,
      19778,
      4645,
      2458
    ],
    "label": "sast_risk",
    "severity": "Low",
    "reason": "Potential risk if the DataFrame structure changes"
  },
  {
    "line": 54,
    "text": "        adjust_type=\"qfq\",",
    "annotation": "\u26a0\ufe0f SAST Risk (Low): Potential risk if the DataFrame structure changes",
    "confidence": 0.5,
    "tokens": [
      220,
      220,
      220,
      220,
      220,
      220,
      220,
      4532,
      62,
      4906,
      2625,
      80,
      69,
      80,
      1600
    ],
    "start_token": 249,
    "end_token": 264,
    "annotation_tokens": [
      158,
      248,
      254,
      37929,
      311,
      11262,
      19602,
      357,
      20535,
      2599,
      32480,
      2526,
      611,
      262,
      6060,
      19778,
      4645,
      2458
    ],
    "label": "sast_risk",
    "severity": "Low",
    "reason": "Potential risk if the DataFrame structure changes"
  },
  {
    "line": 56,
    "text": "",
    "annotation": "\ud83e\udde0 ML Signal: Moving to a new timestamp in the data",
    "confidence": 1.0,
    "tokens": [],
    "start_token": 264,
    "end_token": 264,
    "annotation_tokens": [
      8582,
      100,
      254,
      10373,
      26484,
      25,
      26768,
      284,
      257,
      649,
      41033,
      287,
      262,
      1366
    ],
    "label": "ml_signal",
    "reason": "Moving to a new timestamp in the data"
  },
  {
    "line": 58,
    "text": "",
    "annotation": "\ud83e\udde0 ML Signal: Accessing specific columns from a DataFrame",
    "confidence": 1.0,
    "tokens": [],
    "start_token": 264,
    "end_token": 264,
    "annotation_tokens": [
      8582,
      100,
      254,
      10373,
      26484,
      25,
      8798,
      278,
      2176,
      15180,
      422,
      257,
      6060,
      19778
    ],
    "label": "ml_signal",
    "reason": "Accessing specific columns from a DataFrame"
  },
  {
    "line": 58,
    "text": "",
    "annotation": "\u26a0\ufe0f SAST Risk (Low): Potential risk if the DataFrame structure changes",
    "confidence": 0.5,
    "tokens": [],
    "start_token": 264,
    "end_token": 264,
    "annotation_tokens": [
      158,
      248,
      254,
      37929,
      311,
      11262,
      19602,
      357,
      20535,
      2599,
      32480,
      2526,
      611,
      262,
      6060,
      19778,
      4645,
      2458
    ],
    "label": "sast_risk",
    "severity": "Low",
    "reason": "Potential risk if the DataFrame structure changes"
  },
  {
    "line": 67,
    "text": "",
    "annotation": "\u26a0\ufe0f SAST Risk (Low): Potential risk if the DataFrame structure changes",
    "confidence": 0.5,
    "tokens": [],
    "start_token": 264,
    "end_token": 264,
    "annotation_tokens": [
      158,
      248,
      254,
      37929,
      311,
      11262,
      19602,
      357,
      20535,
      2599,
      32480,
      2526,
      611,
      262,
      6060,
      19778,
      4645,
      2458
    ],
    "label": "sast_risk",
    "severity": "Low",
    "reason": "Potential risk if the DataFrame structure changes"
  },
  {
    "line": 67,
    "text": "",
    "annotation": "\u26a0\ufe0f SAST Risk (Low): Potential risk if the DataFrame structure changes",
    "confidence": 0.5,
    "tokens": [],
    "start_token": 264,
    "end_token": 264,
    "annotation_tokens": [
      158,
      248,
      254,
      37929,
      311,
      11262,
      19602,
      357,
      20535,
      2599,
      32480,
      2526,
      611,
      262,
      6060,
      19778,
      4645,
      2458
    ],
    "label": "sast_risk",
    "severity": "Low",
    "reason": "Potential risk if the DataFrame structure changes"
  },
  {
    "line": 67,
    "text": "",
    "annotation": "\u2705 Best Practice: Consider using logging instead of print for better control over output",
    "confidence": 0.5,
    "tokens": [],
    "start_token": 264,
    "end_token": 264,
    "annotation_tokens": [
      26486,
      227,
      6705,
      19939,
      25,
      12642,
      1262,
      18931,
      2427,
      286,
      3601,
      329,
      1365,
      1630,
      625,
      5072
    ],
    "label": "best_practice",
    "reason": "Consider using logging instead of print for better control over output"
  },
  {
    "line": 69,
    "text": "    diff = factor.factor_df[\"diff\"]",
    "annotation": "\u2705 Best Practice: Consider using logging instead of print for better control over output",
    "confidence": 0.5,
    "tokens": [
      220,
      220,
      220,
      814,
      796,
      5766,
      13,
      31412,
      62,
      7568,
      14692,
      26069,
      8973
    ],
    "start_token": 264,
    "end_token": 277,
    "annotation_tokens": [
      26486,
      227,
      6705,
      19939,
      25,
      12642,
      1262,
      18931,
      2427,
      286,
      3601,
      329,
      1365,
      1630,
      625,
      5072
    ],
    "label": "best_practice",
    "reason": "Consider using logging instead of print for better control over output"
  },
  {
    "line": 71,
    "text": "    macd = factor.factor_df[\"macd\"]",
    "annotation": "\ud83e\udde0 ML Signal: Usage of assert statements for validation",
    "confidence": 1.0,
    "tokens": [
      220,
      220,
      220,
      8352,
      67,
      796,
      5766,
      13,
      31412,
      62,
      7568,
      14692,
      20285,
      67,
      8973
    ],
    "start_token": 277,
    "end_token": 292,
    "annotation_tokens": [
      8582,
      100,
      254,
      10373,
      26484,
      25,
      29566,
      286,
      6818,
      6299,
      329,
      21201
    ],
    "label": "ml_signal",
    "reason": "Usage of assert statements for validation"
  },
  {
    "line": 73,
    "text": "    assert round(diff.loc[(\"stock_sz_000338\", \"2019-06-17\")], 2) == 0.06",
    "annotation": "\ud83e\udde0 ML Signal: Usage of assert statements for validation",
    "confidence": 1.0,
    "tokens": [
      220,
      220,
      220,
      6818,
      2835,
      7,
      26069,
      13,
      17946,
      58,
      7203,
      13578,
      62,
      82,
      89,
      62,
      830,
      28460,
      1600,
      366,
      23344,
      12,
      3312,
      12,
      1558,
      4943,
      4357,
      362,
      8,
      6624,
      657,
      13,
      3312
    ],
    "start_token": 292,
    "end_token": 325,
    "annotation_tokens": [
      8582,
      100,
      254,
      10373,
      26484,
      25,
      29566,
      286,
      6818,
      6299,
      329,
      21201
    ],
    "label": "ml_signal",
    "reason": "Usage of assert statements for validation"
  },
  {
    "line": 75,
    "text": "    assert round(macd.loc[(\"stock_sz_000338\", \"2019-06-17\")], 2) <= 0.19",
    "annotation": "\ud83e\udde0 ML Signal: Usage of assert statements for validation",
    "confidence": 1.0,
    "tokens": [
      220,
      220,
      220,
      6818,
      2835,
      7,
      20285,
      67,
      13,
      17946,
      58,
      7203,
      13578,
      62,
      82,
      89,
      62,
      830,
      28460,
      1600,
      366,
      23344,
      12,
      3312,
      12,
      1558,
      4943,
      4357,
      362,
      8,
      19841,
      657,
      13,
      1129
    ],
    "start_token": 325,
    "end_token": 359,
    "annotation_tokens": [
      8582,
      100,
      254,
      10373,
      26484,
      25,
      29566,
      286,
      6818,
      6299,
      329,
      21201
    ],
    "label": "ml_signal",
    "reason": "Usage of assert statements for validation"
  },
  {
    "line": 77,
    "text": "",
    "annotation": "\ud83e\udde0 ML Signal: Usage of assert statements for validation",
    "confidence": 1.0,
    "tokens": [],
    "start_token": 359,
    "end_token": 359,
    "annotation_tokens": [
      8582,
      100,
      254,
      10373,
      26484,
      25,
      29566,
      286,
      6818,
      6299,
      329,
      21201
    ],
    "label": "ml_signal",
    "reason": "Usage of assert statements for validation"
  },
  {
    "line": 77,
    "text": "",
    "annotation": "\ud83e\udde0 ML Signal: Usage of assert statements for validation",
    "confidence": 1.0,
    "tokens": [],
    "start_token": 359,
    "end_token": 359,
    "annotation_tokens": [
      8582,
      100,
      254,
      10373,
      26484,
      25,
      29566,
      286,
      6818,
      6299,
      329,
      21201
    ],
    "label": "ml_signal",
    "reason": "Usage of assert statements for validation"
  },
  {
    "line": 77,
    "text": "",
    "annotation": "\ud83e\udde0 ML Signal: Usage of assert statements for validation",
    "confidence": 1.0,
    "tokens": [],
    "start_token": 359,
    "end_token": 359,
    "annotation_tokens": [
      8582,
      100,
      254,
      10373,
      26484,
      25,
      29566,
      286,
      6818,
      6299,
      329,
      21201
    ],
    "label": "ml_signal",
    "reason": "Usage of assert statements for validation"
  },
  {
    "line": 77,
    "text": "",
    "annotation": "\ud83e\udde0 ML Signal: Method call pattern for moving to the next state",
    "confidence": 0.5,
    "tokens": [],
    "start_token": 359,
    "end_token": 359,
    "annotation_tokens": [
      8582,
      100,
      254,
      10373,
      26484,
      25,
      11789,
      869,
      3912,
      329,
      3867,
      284,
      262,
      1306,
      1181
    ],
    "label": "ml_signal",
    "reason": "Method call pattern for moving to the next state"
  },
  {
    "line": 77,
    "text": "",
    "annotation": "\ud83e\udde0 ML Signal: Usage of assert statements for validation",
    "confidence": 1.0,
    "tokens": [],
    "start_token": 359,
    "end_token": 359,
    "annotation_tokens": [
      8582,
      100,
      254,
      10373,
      26484,
      25,
      29566,
      286,
      6818,
      6299,
      329,
      21201
    ],
    "label": "ml_signal",
    "reason": "Usage of assert statements for validation"
  }
]