[
  {
    "line": 4,
    "text": "from typing import Type",
    "annotation": "\u2705 Best Practice: Grouping imports by their source (standard library, third-party, local) improves readability.",
    "confidence": 1.0,
    "tokens": [
      6738,
      19720,
      1330,
      5994
    ],
    "start_token": 0,
    "end_token": 4,
    "annotation_tokens": [
      26486,
      227,
      6705,
      19939,
      25,
      4912,
      278,
      17944,
      416,
      511,
      2723,
      357,
      20307,
      5888,
      11,
      2368,
      12,
      10608,
      11,
      1957,
      8,
      19575,
      1100,
      1799,
      13
    ],
    "label": "best_practice",
    "reason": "Grouping imports by their source (standard library, third-party, local) improves readability."
  },
  {
    "line": 18,
    "text": "from zvt.utils.time_utils import date_time_by_interval",
    "annotation": "\u2705 Best Practice: Using a logger instead of print statements for logging is a best practice.",
    "confidence": 0.5,
    "tokens": [
      6738,
      1976,
      36540,
      13,
      26791,
      13,
      2435,
      62,
      26791,
      1330,
      3128,
      62,
      2435,
      62,
      1525,
      62,
      3849,
      2100
    ],
    "start_token": 4,
    "end_token": 22,
    "annotation_tokens": [
      26486,
      227,
      6705,
      19939,
      25,
      8554,
      257,
      49706,
      2427,
      286,
      3601,
      6299,
      329,
      18931,
      318,
      257,
      1266,
      3357,
      13
    ],
    "label": "best_practice",
    "reason": "Using a logger instead of print statements for logging is a best practice."
  },
  {
    "line": 34,
    "text": "    group_by_tag=True,",
    "annotation": "\u26a0\ufe0f SAST Risk (Low): Potential for SQL injection if entity_ids are not properly sanitized",
    "confidence": 0.5,
    "tokens": [
      220,
      220,
      220,
      1448,
      62,
      1525,
      62,
      12985,
      28,
      17821,
      11
    ],
    "start_token": 22,
    "end_token": 33,
    "annotation_tokens": [
      158,
      248,
      254,
      37929,
      311,
      11262,
      19602,
      357,
      20535,
      2599,
      32480,
      329,
      16363,
      16954,
      611,
      9312,
      62,
      2340,
      389,
      407,
      6105,
      5336,
      36951
    ],
    "label": "sast_risk",
    "severity": "Low",
    "reason": "Potential for SQL injection if entity_ids are not properly sanitized"
  },
  {
    "line": 38,
    "text": "    if entity_ids:",
    "annotation": "\u2705 Best Practice: Use list comprehension for filtering entities",
    "confidence": 0.5,
    "tokens": [
      220,
      220,
      220,
      611,
      9312,
      62,
      2340,
      25
    ],
    "start_token": 33,
    "end_token": 41,
    "annotation_tokens": [
      26486,
      227,
      6705,
      19939,
      25,
      5765,
      1351,
      35915,
      329,
      25431,
      12066
    ],
    "label": "best_practice",
    "reason": "Use list comprehension for filtering entities"
  },
  {
    "line": 42,
    "text": "        entities = [entity for entity in entities if entity.entity_id in entity_ids]",
    "annotation": "\u26a0\ufe0f SAST Risk (Low): Assertion could be disabled in production, leading to unexpected behavior",
    "confidence": 0.5,
    "tokens": [
      220,
      220,
      220,
      220,
      220,
      220,
      220,
      12066,
      796,
      685,
      26858,
      329,
      9312,
      287,
      12066,
      611,
      9312,
      13,
      26858,
      62,
      312,
      287,
      9312,
      62,
      2340,
      60
    ],
    "start_token": 41,
    "end_token": 67,
    "annotation_tokens": [
      158,
      248,
      254,
      37929,
      311,
      11262,
      19602,
      357,
      20535,
      2599,
      2195,
      861,
      295,
      714,
      307,
      10058,
      287,
      3227,
      11,
      3756,
      284,
      10059,
      4069
    ],
    "label": "sast_risk",
    "severity": "Low",
    "reason": "Assertion could be disabled in production, leading to unexpected behavior"
  },
  {
    "line": 42,
    "text": "        entities = [entity for entity in entities if entity.entity_id in entity_ids]",
    "annotation": "\ud83e\udde0 ML Signal: Recording stock data could be used for predictive modeling",
    "confidence": 0.5,
    "tokens": [
      220,
      220,
      220,
      220,
      220,
      220,
      220,
      12066,
      796,
      685,
      26858,
      329,
      9312,
      287,
      12066,
      611,
      9312,
      13,
      26858,
      62,
      312,
      287,
      9312,
      62,
      2340,
      60
    ],
    "start_token": 67,
    "end_token": 93,
    "annotation_tokens": [
      8582,
      100,
      254,
      10373,
      26484,
      25,
      43905,
      4283,
      1366,
      714,
      307,
      973,
      329,
      33344,
      21128
    ],
    "label": "ml_signal",
    "reason": "Recording stock data could be used for predictive modeling"
  },
  {
    "line": 53,
    "text": "                day_data=True,",
    "annotation": "\ud83e\udde0 ML Signal: Grouping stocks by topic could be used for topic modeling",
    "confidence": 0.5,
    "tokens": [
      220,
      220,
      220,
      220,
      220,
      220,
      220,
      220,
      220,
      220,
      220,
      220,
      220,
      220,
      220,
      1110,
      62,
      7890,
      28,
      17821,
      11
    ],
    "start_token": 93,
    "end_token": 114,
    "annotation_tokens": [
      8582,
      100,
      254,
      10373,
      26484,
      25,
      4912,
      278,
      14420,
      416,
      7243,
      714,
      307,
      973,
      329,
      7243,
      21128
    ],
    "label": "ml_signal",
    "reason": "Grouping stocks by topic could be used for topic modeling"
  },
  {
    "line": 57,
    "text": "            logger.info(msg)",
    "annotation": "\u26a0\ufe0f SAST Risk (Low): Email sending could be abused for spam if not properly secured",
    "confidence": 0.5,
    "tokens": [
      220,
      220,
      220,
      220,
      220,
      220,
      220,
      220,
      220,
      220,
      220,
      49706,
      13,
      10951,
      7,
      19662,
      8
    ],
    "start_token": 114,
    "end_token": 131,
    "annotation_tokens": [
      158,
      248,
      254,
      37929,
      311,
      11262,
      19602,
      357,
      20535,
      2599,
      9570,
      7216,
      714,
      307,
      15519,
      329,
      18084,
      611,
      407,
      6105,
      13659
    ],
    "label": "sast_risk",
    "severity": "Low",
    "reason": "Email sending could be abused for spam if not properly secured"
  },
  {
    "line": 59,
    "text": "",
    "annotation": "\ud83e\udde0 ML Signal: Grouping stocks by tag could be used for classification tasks",
    "confidence": 0.5,
    "tokens": [],
    "start_token": 131,
    "end_token": 131,
    "annotation_tokens": [
      8582,
      100,
      254,
      10373,
      26484,
      25,
      4912,
      278,
      14420,
      416,
      7621,
      714,
      307,
      973,
      329,
      17923,
      8861
    ],
    "label": "ml_signal",
    "reason": "Grouping stocks by tag could be used for classification tasks"
  },
  {
    "line": 83,
    "text": "",
    "annotation": "\ud83e\udde0 ML Signal: Adding to eastmoney could be used for tracking or recommendation systems",
    "confidence": 0.5,
    "tokens": [],
    "start_token": 131,
    "end_token": 131,
    "annotation_tokens": [
      8582,
      100,
      254,
      10373,
      26484,
      25,
      18247,
      284,
      7627,
      26316,
      714,
      307,
      973,
      329,
      9646,
      393,
      15602,
      3341
    ],
    "label": "ml_signal",
    "reason": "Adding to eastmoney could be used for tracking or recommendation systems"
  },
  {
    "line": 104,
    "text": "                    codes = [entity.code for entity in entities]",
    "annotation": "\u26a0\ufe0f SAST Risk (Low): Catching broad exceptions can hide specific errors",
    "confidence": 0.5,
    "tokens": [
      220,
      220,
      220,
      220,
      220,
      220,
      220,
      220,
      220,
      220,
      220,
      220,
      220,
      220,
      220,
      220,
      220,
      220,
      220,
      12416,
      796,
      685,
      26858,
      13,
      8189,
      329,
      9312,
      287,
      12066,
      60
    ],
    "start_token": 131,
    "end_token": 161,
    "annotation_tokens": [
      158,
      248,
      254,
      37929,
      311,
      11262,
      19602,
      357,
      20535,
      2599,
      327,
      19775,
      3154,
      13269,
      460,
      7808,
      2176,
      8563
    ],
    "label": "sast_risk",
    "severity": "Low",
    "reason": "Catching broad exceptions can hide specific errors"
  },
  {
    "line": 113,
    "text": "                    )",
    "annotation": "\u26a0\ufe0f SAST Risk (Low): Email sending could be abused for spam if not properly secured",
    "confidence": 0.5,
    "tokens": [
      220,
      220,
      220,
      220,
      220,
      220,
      220,
      220,
      220,
      220,
      220,
      220,
      220,
      220,
      220,
      220,
      220,
      220,
      220,
      1267
    ],
    "start_token": 161,
    "end_token": 181,
    "annotation_tokens": [
      158,
      248,
      254,
      37929,
      311,
      11262,
      19602,
      357,
      20535,
      2599,
      9570,
      7216,
      714,
      307,
      15519,
      329,
      18084,
      611,
      407,
      6105,
      13659
    ],
    "label": "sast_risk",
    "severity": "Low",
    "reason": "Email sending could be abused for spam if not properly secured"
  },
  {
    "line": 120,
    "text": "",
    "annotation": "\ud83e\udde0 ML Signal: Logging usage pattern",
    "confidence": 1.0,
    "tokens": [],
    "start_token": 181,
    "end_token": 181,
    "annotation_tokens": [
      8582,
      100,
      254,
      10373,
      26484,
      25,
      5972,
      2667,
      8748,
      3912
    ],
    "label": "ml_signal",
    "reason": "Logging usage pattern"
  },
  {
    "line": 125,
    "text": "    data_provider,",
    "annotation": "\u2705 Best Practice: Use a constant for the maximum number of retries",
    "confidence": 1.0,
    "tokens": [
      220,
      220,
      220,
      1366,
      62,
      15234,
      1304,
      11
    ],
    "start_token": 181,
    "end_token": 189,
    "annotation_tokens": [
      26486,
      227,
      6705,
      19939,
      25,
      5765,
      257,
      6937,
      329,
      262,
      5415,
      1271,
      286,
      1005,
      1678
    ],
    "label": "best_practice",
    "reason": "Use a constant for the maximum number of retries"
  },
  {
    "line": 128,
    "text": "    informer: EmailInformer = None,",
    "annotation": "\u2705 Best Practice: Use a default value for adjust_type if not provided",
    "confidence": 0.5,
    "tokens": [
      220,
      220,
      220,
      4175,
      263,
      25,
      9570,
      818,
      16354,
      796,
      6045,
      11
    ],
    "start_token": 189,
    "end_token": 201,
    "annotation_tokens": [
      26486,
      227,
      6705,
      19939,
      25,
      5765,
      257,
      4277,
      1988,
      329,
      4532,
      62,
      4906,
      611,
      407,
      2810
    ],
    "label": "best_practice",
    "reason": "Use a default value for adjust_type if not provided"
  },
  {
    "line": 134,
    "text": "    start_timestamp=\"2019-01-01\",",
    "annotation": "\ud83e\udde0 ML Signal: Logging usage pattern",
    "confidence": 1.0,
    "tokens": [
      220,
      220,
      220,
      923,
      62,
      16514,
      27823,
      2625,
      23344,
      12,
      486,
      12,
      486,
      1600
    ],
    "start_token": 201,
    "end_token": 215,
    "annotation_tokens": [
      8582,
      100,
      254,
      10373,
      26484,
      25,
      5972,
      2667,
      8748,
      3912
    ],
    "label": "ml_signal",
    "reason": "Logging usage pattern"
  },
  {
    "line": 147,
    "text": "            target_date = get_latest_kdata_date(",
    "annotation": "\ud83e\udde0 ML Signal: Logging usage pattern",
    "confidence": 1.0,
    "tokens": [
      220,
      220,
      220,
      220,
      220,
      220,
      220,
      220,
      220,
      220,
      220,
      2496,
      62,
      4475,
      796,
      651,
      62,
      42861,
      62,
      74,
      7890,
      62,
      4475,
      7
    ],
    "start_token": 215,
    "end_token": 239,
    "annotation_tokens": [
      8582,
      100,
      254,
      10373,
      26484,
      25,
      5972,
      2667,
      8748,
      3912
    ],
    "label": "ml_signal",
    "reason": "Logging usage pattern"
  },
  {
    "line": 193,
    "text": "                provider=data_provider,",
    "annotation": "\ud83e\udde0 ML Signal: Logging usage pattern",
    "confidence": 1.0,
    "tokens": [
      220,
      220,
      220,
      220,
      220,
      220,
      220,
      220,
      220,
      220,
      220,
      220,
      220,
      220,
      220,
      10131,
      28,
      7890,
      62,
      15234,
      1304,
      11
    ],
    "start_token": 239,
    "end_token": 261,
    "annotation_tokens": [
      8582,
      100,
      254,
      10373,
      26484,
      25,
      5972,
      2667,
      8748,
      3912
    ],
    "label": "ml_signal",
    "reason": "Logging usage pattern"
  },
  {
    "line": 198,
    "text": "                **factor_kv,",
    "annotation": "\u26a0\ufe0f SAST Risk (Low): Potentially long sleep duration in case of repeated errors",
    "confidence": 0.5,
    "tokens": [
      220,
      220,
      220,
      220,
      220,
      220,
      220,
      220,
      220,
      220,
      220,
      220,
      220,
      220,
      220,
      12429,
      31412,
      62,
      74,
      85,
      11
    ],
    "start_token": 261,
    "end_token": 282,
    "annotation_tokens": [
      158,
      248,
      254,
      37929,
      311,
      11262,
      19602,
      357,
      20535,
      2599,
      6902,
      3746,
      890,
      3993,
      9478,
      287,
      1339,
      286,
      5100,
      8563
    ],
    "label": "sast_risk",
    "severity": "Low",
    "reason": "Potentially long sleep duration in case of repeated errors"
  },
  {
    "line": 198,
    "text": "                **factor_kv,",
    "annotation": "\u26a0\ufe0f SAST Risk (Low): Potential information leakage through email in case of an error",
    "confidence": 1.0,
    "tokens": [
      220,
      220,
      220,
      220,
      220,
      220,
      220,
      220,
      220,
      220,
      220,
      220,
      220,
      220,
      220,
      12429,
      31412,
      62,
      74,
      85,
      11
    ],
    "start_token": 282,
    "end_token": 303,
    "annotation_tokens": [
      158,
      248,
      254,
      37929,
      311,
      11262,
      19602,
      357,
      20535,
      2599,
      32480,
      1321,
      47988,
      832,
      3053,
      287,
      1339,
      286,
      281,
      4049
    ],
    "label": "sast_risk",
    "severity": "Low",
    "reason": "Potential information leakage through email in case of an error"
  },
  {
    "line": 257,
    "text": "            )",
    "annotation": "\u26a0\ufe0f SAST Risk (Low): Catching broad exceptions can hide specific errors and make debugging difficult.",
    "confidence": 0.5,
    "tokens": [
      220,
      220,
      220,
      220,
      220,
      220,
      220,
      220,
      220,
      220,
      220,
      1267
    ],
    "start_token": 303,
    "end_token": 315,
    "annotation_tokens": [
      158,
      248,
      254,
      37929,
      311,
      11262,
      19602,
      357,
      20535,
      2599,
      327,
      19775,
      3154,
      13269,
      460,
      7808,
      2176,
      8563,
      290,
      787,
      28769,
      2408,
      13
    ],
    "label": "sast_risk",
    "severity": "Low",
    "reason": "Catching broad exceptions can hide specific errors and make debugging difficult."
  },
  {
    "line": 259,
    "text": "            selected, real_period = get_top_performance_entities_by_periods(",
    "annotation": "\u26a0\ufe0f SAST Risk (Low): Using time.sleep in exception handling can delay error resolution.",
    "confidence": 0.5,
    "tokens": [
      220,
      220,
      220,
      220,
      220,
      220,
      220,
      220,
      220,
      220,
      220,
      6163,
      11,
      1103,
      62,
      41007,
      796,
      651,
      62,
      4852,
      62,
      26585,
      62,
      298,
      871,
      62,
      1525,
      62,
      41007,
      82,
      7
    ],
    "start_token": 315,
    "end_token": 346,
    "annotation_tokens": [
      158,
      248,
      254,
      37929,
      311,
      11262,
      19602,
      357,
      20535,
      2599,
      8554,
      640,
      13,
      42832,
      287,
      6631,
      9041,
      460,
      5711,
      4049,
      6323,
      13
    ],
    "label": "sast_risk",
    "severity": "Low",
    "reason": "Using time.sleep in exception handling can delay error resolution."
  },
  {
    "line": 261,
    "text": "                data_provider=data_provider,",
    "annotation": "\ud83e\udde0 ML Signal: Usage of the function with specific parameters can indicate user preferences or common use cases.",
    "confidence": 0.5,
    "tokens": [
      220,
      220,
      220,
      220,
      220,
      220,
      220,
      220,
      220,
      220,
      220,
      220,
      220,
      220,
      220,
      1366,
      62,
      15234,
      1304,
      28,
      7890,
      62,
      15234,
      1304,
      11
    ],
    "start_token": 346,
    "end_token": 371,
    "annotation_tokens": [
      8582,
      100,
      254,
      10373,
      26484,
      25,
      29566,
      286,
      262,
      2163,
      351,
      2176,
      10007,
      460,
      7603,
      2836,
      15387,
      393,
      2219,
      779,
      2663,
      13
    ],
    "label": "ml_signal",
    "reason": "Usage of the function with specific parameters can indicate user preferences or common use cases."
  },
  {
    "line": 276,
    "text": "                if limit_up_stocks:",
    "annotation": "\u2705 Best Practice: Defining __all__ helps in controlling what is exported when the module is imported.",
    "confidence": 0.5,
    "tokens": [
      220,
      220,
      220,
      220,
      220,
      220,
      220,
      220,
      220,
      220,
      220,
      220,
      220,
      220,
      220,
      611,
      4179,
      62,
      929,
      62,
      29522,
      25
    ],
    "start_token": 371,
    "end_token": 393,
    "annotation_tokens": [
      26486,
      227,
      6705,
      19939,
      25,
      2896,
      3191,
      11593,
      439,
      834,
      5419,
      287,
      12755,
      644,
      318,
      29050,
      618,
      262,
      8265,
      318,
      17392,
      13
    ],
    "label": "best_practice",
    "reason": "Defining __all__ helps in controlling what is exported when the module is imported."
  }
]