[
  {
    "line": 2,
    "text": "# Licensed under the MIT License.",
    "annotation": "\u2705 Best Practice: Ensures compatibility with future Python versions for type annotations.",
    "confidence": 0.5,
    "tokens": [
      2,
      49962,
      739,
      262,
      17168,
      13789,
      13
    ],
    "start_token": 0,
    "end_token": 7,
    "annotation_tokens": [
      26486,
      227,
      6705,
      19939,
      25,
      48221,
      942,
      17764,
      351,
      2003,
      11361,
      6300,
      329,
      2099,
      37647,
      13
    ],
    "label": "best_practice",
    "reason": "Ensures compatibility with future Python versions for type annotations."
  },
  {
    "line": 6,
    "text": "import typing",
    "annotation": "\u2705 Best Practice: Grouping imports from the same module on a single line improves readability.",
    "confidence": 0.5,
    "tokens": [
      11748,
      19720
    ],
    "start_token": 7,
    "end_token": 9,
    "annotation_tokens": [
      26486,
      227,
      6705,
      19939,
      25,
      4912,
      278,
      17944,
      422,
      262,
      976,
      8265,
      319,
      257,
      2060,
      1627,
      19575,
      1100,
      1799,
      13
    ],
    "label": "best_practice",
    "reason": "Grouping imports from the same module on a single line improves readability."
  },
  {
    "line": 10,
    "text": "import pandas as pd",
    "annotation": "\u2705 Best Practice: Importing libraries with common aliases improves code readability.",
    "confidence": 0.5,
    "tokens": [
      11748,
      19798,
      292,
      355,
      279,
      67
    ],
    "start_token": 9,
    "end_token": 15,
    "annotation_tokens": [
      26486,
      227,
      6705,
      19939,
      25,
      17267,
      278,
      12782,
      351,
      2219,
      47217,
      19575,
      2438,
      1100,
      1799,
      13
    ],
    "label": "best_practice",
    "reason": "Importing libraries with common aliases improves code readability."
  },
  {
    "line": 11,
    "text": "from qlib.backtest import Order",
    "annotation": "\ud83e\udde0 ML Signal: Importing specific classes from a module indicates focused usage of the library.",
    "confidence": 0.5,
    "tokens": [
      6738,
      10662,
      8019,
      13,
      1891,
      9288,
      1330,
      8284
    ],
    "start_token": 15,
    "end_token": 23,
    "annotation_tokens": [
      8582,
      100,
      254,
      10373,
      26484,
      25,
      17267,
      278,
      2176,
      6097,
      422,
      257,
      8265,
      9217,
      5670,
      8748,
      286,
      262,
      5888,
      13
    ],
    "label": "ml_signal",
    "reason": "Importing specific classes from a module indicates focused usage of the library."
  },
  {
    "line": 18,
    "text": "class SAOEMetrics(TypedDict):",
    "annotation": "\ud83e\udde0 ML Signal: Usage of TypedDict suggests structured data handling.",
    "confidence": 0.5,
    "tokens": [
      4871,
      14719,
      46,
      3620,
      316,
      10466,
      7,
      31467,
      276,
      35,
      713,
      2599
    ],
    "start_token": 23,
    "end_token": 35,
    "annotation_tokens": [
      8582,
      100,
      254,
      10373,
      26484,
      25,
      29566,
      286,
      17134,
      276,
      35,
      713,
      5644,
      20793,
      1366,
      9041,
      13
    ],
    "label": "ml_signal",
    "reason": "Usage of TypedDict suggests structured data handling."
  },
  {
    "line": 20,
    "text": "    It could be accumulated for a day, or a period of time (e.g., 30min), or calculated separately for every minute.",
    "annotation": "\u2705 Best Practice: Conditional imports for type checking improve performance and avoid circular dependencies.",
    "confidence": 1.0,
    "tokens": [
      220,
      220,
      220,
      632,
      714,
      307,
      22425,
      329,
      257,
      1110,
      11,
      393,
      257,
      2278,
      286,
      640,
      357,
      68,
      13,
      70,
      1539,
      1542,
      1084,
      828,
      393,
      10488,
      13869,
      329,
      790,
      5664,
      13
    ],
    "start_token": 35,
    "end_token": 66,
    "annotation_tokens": [
      26486,
      227,
      6705,
      19939,
      25,
      9724,
      1859,
      17944,
      329,
      2099,
      10627,
      2987,
      2854,
      290,
      3368,
      18620,
      20086,
      13
    ],
    "label": "best_practice",
    "reason": "Conditional imports for type checking improve performance and avoid circular dependencies."
  },
  {
    "line": 18,
    "text": "class SAOEMetrics(TypedDict):",
    "annotation": "\u2705 Best Practice: Use of type hints improves code readability and maintainability.",
    "confidence": 0.5,
    "tokens": [
      4871,
      14719,
      46,
      3620,
      316,
      10466,
      7,
      31467,
      276,
      35,
      713,
      2599
    ],
    "start_token": 66,
    "end_token": 78,
    "annotation_tokens": [
      26486,
      227,
      6705,
      19939,
      25,
      5765,
      286,
      2099,
      20269,
      19575,
      2438,
      1100,
      1799,
      290,
      5529,
      1799,
      13
    ],
    "label": "best_practice",
    "reason": "Use of type hints improves code readability and maintainability."
  },
  {
    "line": 21,
    "text": "",
    "annotation": "\u2705 Best Practice: Use of type hints improves code readability and maintainability.",
    "confidence": 0.5,
    "tokens": [],
    "start_token": 78,
    "end_token": 78,
    "annotation_tokens": [
      26486,
      227,
      6705,
      19939,
      25,
      5765,
      286,
      2099,
      20269,
      19575,
      2438,
      1100,
      1799,
      290,
      5529,
      1799,
      13
    ],
    "label": "best_practice",
    "reason": "Use of type hints improves code readability and maintainability."
  },
  {
    "line": 24,
    "text": "    The type hints are for single elements. In lots of times, they can be vectorized.",
    "annotation": "\u2705 Best Practice: Use of type hints improves code readability and maintainability.",
    "confidence": 0.5,
    "tokens": [
      220,
      220,
      220,
      383,
      2099,
      20269,
      389,
      329,
      2060,
      4847,
      13,
      554,
      6041,
      286,
      1661,
      11,
      484,
      460,
      307,
      15879,
      1143,
      13
    ],
    "start_token": 78,
    "end_token": 100,
    "annotation_tokens": [
      26486,
      227,
      6705,
      19939,
      25,
      5765,
      286,
      2099,
      20269,
      19575,
      2438,
      1100,
      1799,
      290,
      5529,
      1799,
      13
    ],
    "label": "best_practice",
    "reason": "Use of type hints improves code readability and maintainability."
  },
  {
    "line": 27,
    "text": "",
    "annotation": "\u2705 Best Practice: Use of type hints improves code readability and maintainability.",
    "confidence": 0.5,
    "tokens": [],
    "start_token": 100,
    "end_token": 100,
    "annotation_tokens": [
      26486,
      227,
      6705,
      19939,
      25,
      5765,
      286,
      2099,
      20269,
      19575,
      2438,
      1100,
      1799,
      290,
      5529,
      1799,
      13
    ],
    "label": "best_practice",
    "reason": "Use of type hints improves code readability and maintainability."
  },
  {
    "line": 30,
    "text": "    datetime: pd.Timestamp | pd.DatetimeIndex",
    "annotation": "\u2705 Best Practice: Use of type hints improves code readability and maintainability.",
    "confidence": 0.5,
    "tokens": [
      220,
      220,
      220,
      4818,
      8079,
      25,
      279,
      67,
      13,
      14967,
      27823,
      930,
      279,
      67,
      13,
      27354,
      8079,
      15732
    ],
    "start_token": 100,
    "end_token": 118,
    "annotation_tokens": [
      26486,
      227,
      6705,
      19939,
      25,
      5765,
      286,
      2099,
      20269,
      19575,
      2438,
      1100,
      1799,
      290,
      5529,
      1799,
      13
    ],
    "label": "best_practice",
    "reason": "Use of type hints improves code readability and maintainability."
  },
  {
    "line": 33,
    "text": "    \"\"\"Direction of the order. 0 for sell, 1 for buy.\"\"\"",
    "annotation": "\u2705 Best Practice: Use of type hints improves code readability and maintainability.",
    "confidence": 0.5,
    "tokens": [
      220,
      220,
      220,
      37227,
      35,
      4154,
      286,
      262,
      1502,
      13,
      657,
      329,
      3677,
      11,
      352,
      329,
      2822,
      526,
      15931
    ],
    "start_token": 118,
    "end_token": 137,
    "annotation_tokens": [
      26486,
      227,
      6705,
      19939,
      25,
      5765,
      286,
      2099,
      20269,
      19575,
      2438,
      1100,
      1799,
      290,
      5529,
      1799,
      13
    ],
    "label": "best_practice",
    "reason": "Use of type hints improves code readability and maintainability."
  },
  {
    "line": 36,
    "text": "    market_volume: np.ndarray | float",
    "annotation": "\u2705 Best Practice: Use of type hints improves code readability and maintainability.",
    "confidence": 0.5,
    "tokens": [
      220,
      220,
      220,
      1910,
      62,
      29048,
      25,
      45941,
      13,
      358,
      18747,
      930,
      12178
    ],
    "start_token": 137,
    "end_token": 150,
    "annotation_tokens": [
      26486,
      227,
      6705,
      19939,
      25,
      5765,
      286,
      2099,
      20269,
      19575,
      2438,
      1100,
      1799,
      290,
      5529,
      1799,
      13
    ],
    "label": "best_practice",
    "reason": "Use of type hints improves code readability and maintainability."
  },
  {
    "line": 40,
    "text": "",
    "annotation": "\u2705 Best Practice: Use of type hints improves code readability and maintainability.",
    "confidence": 0.5,
    "tokens": [],
    "start_token": 150,
    "end_token": 150,
    "annotation_tokens": [
      26486,
      227,
      6705,
      19939,
      25,
      5765,
      286,
      2099,
      20269,
      19575,
      2438,
      1100,
      1799,
      290,
      5529,
      1799,
      13
    ],
    "label": "best_practice",
    "reason": "Use of type hints improves code readability and maintainability."
  },
  {
    "line": 43,
    "text": "    amount: np.ndarray | float",
    "annotation": "\u2705 Best Practice: Use of type hints improves code readability and maintainability.",
    "confidence": 0.5,
    "tokens": [
      220,
      220,
      220,
      2033,
      25,
      45941,
      13,
      358,
      18747,
      930,
      12178
    ],
    "start_token": 150,
    "end_token": 161,
    "annotation_tokens": [
      26486,
      227,
      6705,
      19939,
      25,
      5765,
      286,
      2099,
      20269,
      19575,
      2438,
      1100,
      1799,
      290,
      5529,
      1799,
      13
    ],
    "label": "best_practice",
    "reason": "Use of type hints improves code readability and maintainability."
  },
  {
    "line": 44,
    "text": "    \"\"\"Total amount (volume) strategy intends to trade.\"\"\"",
    "annotation": "\u2705 Best Practice: Use of type hints improves code readability and maintainability.",
    "confidence": 0.5,
    "tokens": [
      220,
      220,
      220,
      37227,
      14957,
      2033,
      357,
      29048,
      8,
      4811,
      19582,
      284,
      3292,
      526,
      15931
    ],
    "start_token": 161,
    "end_token": 176,
    "annotation_tokens": [
      26486,
      227,
      6705,
      19939,
      25,
      5765,
      286,
      2099,
      20269,
      19575,
      2438,
      1100,
      1799,
      290,
      5529,
      1799,
      13
    ],
    "label": "best_practice",
    "reason": "Use of type hints improves code readability and maintainability."
  },
  {
    "line": 49,
    "text": "    deal_amount: np.ndarray | float",
    "annotation": "\u2705 Best Practice: Use of type hints improves code readability and maintainability.",
    "confidence": 0.5,
    "tokens": [
      220,
      220,
      220,
      1730,
      62,
      17287,
      25,
      45941,
      13,
      358,
      18747,
      930,
      12178
    ],
    "start_token": 176,
    "end_token": 189,
    "annotation_tokens": [
      26486,
      227,
      6705,
      19939,
      25,
      5765,
      286,
      2099,
      20269,
      19575,
      2438,
      1100,
      1799,
      290,
      5529,
      1799,
      13
    ],
    "label": "best_practice",
    "reason": "Use of type hints improves code readability and maintainability."
  },
  {
    "line": 52,
    "text": "    \"\"\"The average deal price for this strategy.\"\"\"",
    "annotation": "\u2705 Best Practice: Use of type hints improves code readability and maintainability.",
    "confidence": 0.5,
    "tokens": [
      220,
      220,
      220,
      37227,
      464,
      2811,
      1730,
      2756,
      329,
      428,
      4811,
      526,
      15931
    ],
    "start_token": 189,
    "end_token": 202,
    "annotation_tokens": [
      26486,
      227,
      6705,
      19939,
      25,
      5765,
      286,
      2099,
      20269,
      19575,
      2438,
      1100,
      1799,
      290,
      5529,
      1799,
      13
    ],
    "label": "best_practice",
    "reason": "Use of type hints improves code readability and maintainability."
  },
  {
    "line": 55,
    "text": "    position: np.ndarray | float",
    "annotation": "\u2705 Best Practice: Use of type hints improves code readability and maintainability.",
    "confidence": 0.5,
    "tokens": [
      220,
      220,
      220,
      2292,
      25,
      45941,
      13,
      358,
      18747,
      930,
      12178
    ],
    "start_token": 202,
    "end_token": 213,
    "annotation_tokens": [
      26486,
      227,
      6705,
      19939,
      25,
      5765,
      286,
      2099,
      20269,
      19575,
      2438,
      1100,
      1799,
      290,
      5529,
      1799,
      13
    ],
    "label": "best_practice",
    "reason": "Use of type hints improves code readability and maintainability."
  },
  {
    "line": 65,
    "text": "    The baseline is trade price when using TWAP strategy to execute this order.",
    "annotation": "\u26a0\ufe0f SAST Risk (Medium): Potential for leaking future data if not handled correctly.",
    "confidence": 1.0,
    "tokens": [
      220,
      220,
      220,
      383,
      14805,
      318,
      3292,
      2756,
      618,
      1262,
      17306,
      2969,
      4811,
      284,
      12260,
      428,
      1502,
      13
    ],
    "start_token": 213,
    "end_token": 231,
    "annotation_tokens": [
      158,
      248,
      254,
      37929,
      311,
      11262,
      19602,
      357,
      31205,
      2599,
      32480,
      329,
      25243,
      2003,
      1366,
      611,
      407,
      12118,
      9380,
      13
    ],
    "label": "sast_risk",
    "severity": "Medium",
    "reason": "Potential for leaking future data if not handled correctly."
  }
]