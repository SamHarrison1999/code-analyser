[
  {
    "line": 2,
    "text": "import numpy as np",
    "annotation": "\ud83e\udde0 ML Signal: Use of numpy for numerical operations",
    "confidence": 0.5,
    "tokens": [
      11748,
      299,
      32152,
      355,
      45941
    ],
    "start_token": 0,
    "end_token": 5,
    "annotation_tokens": [
      8582,
      100,
      254,
      10373,
      26484,
      25,
      5765,
      286,
      299,
      32152,
      329,
      29052,
      4560
    ],
    "label": "ml_signal",
    "reason": "Use of numpy for numerical operations"
  },
  {
    "line": 4,
    "text": "import matplotlib.pyplot as plt",
    "annotation": "\ud83e\udde0 ML Signal: Use of pandas for data manipulation",
    "confidence": 0.5,
    "tokens": [
      11748,
      2603,
      29487,
      8019,
      13,
      9078,
      29487,
      355,
      458,
      83
    ],
    "start_token": 5,
    "end_token": 15,
    "annotation_tokens": [
      8582,
      100,
      254,
      10373,
      26484,
      25,
      5765,
      286,
      19798,
      292,
      329,
      1366,
      17512
    ],
    "label": "ml_signal",
    "reason": "Use of pandas for data manipulation"
  },
  {
    "line": 6,
    "text": "",
    "annotation": "\ud83e\udde0 ML Signal: Use of matplotlib for data visualization",
    "confidence": 0.5,
    "tokens": [],
    "start_token": 15,
    "end_token": 15,
    "annotation_tokens": [
      8582,
      100,
      254,
      10373,
      26484,
      25,
      5765,
      286,
      2603,
      29487,
      8019,
      329,
      1366,
      32704
    ],
    "label": "ml_signal",
    "reason": "Use of matplotlib for data visualization"
  },
  {
    "line": 8,
    "text": "plt.rcParams[\"font.sans-serif\"] = \"SimHei\"",
    "annotation": "\ud83e\udde0 ML Signal: Use of seaborn for statistical data visualization",
    "confidence": 0.5,
    "tokens": [
      489,
      83,
      13,
      6015,
      10044,
      4105,
      14692,
      10331,
      13,
      82,
      504,
      12,
      2655,
      361,
      8973,
      796,
      366,
      8890,
      1544,
      72,
      1
    ],
    "start_token": 15,
    "end_token": 36,
    "annotation_tokens": [
      8582,
      100,
      254,
      10373,
      26484,
      25,
      5765,
      286,
      384,
      397,
      1211,
      329,
      13905,
      1366,
      32704
    ],
    "label": "ml_signal",
    "reason": "Use of seaborn for statistical data visualization"
  },
  {
    "line": 13,
    "text": "# %matplotlib inline",
    "annotation": "\ud83e\udde0 ML Signal: Use of tqdm for progress bar in loops",
    "confidence": 0.5,
    "tokens": [
      2,
      4064,
      6759,
      29487,
      8019,
      26098
    ],
    "start_token": 36,
    "end_token": 42,
    "annotation_tokens": [
      8582,
      100,
      254,
      10373,
      26484,
      25,
      5765,
      286,
      256,
      80,
      36020,
      329,
      4371,
      2318,
      287,
      23607
    ],
    "label": "ml_signal",
    "reason": "Use of tqdm for progress bar in loops"
  },
  {
    "line": 15,
    "text": "",
    "annotation": "\u26a0\ufe0f SAST Risk (Medium): Loading data with pickle can lead to arbitrary code execution if the source is untrusted",
    "confidence": 1.0,
    "tokens": [],
    "start_token": 42,
    "end_token": 42,
    "annotation_tokens": [
      158,
      248,
      254,
      37929,
      311,
      11262,
      19602,
      357,
      31205,
      2599,
      12320,
      1366,
      351,
      2298,
      293,
      460,
      1085,
      284,
      14977,
      2438,
      9706,
      611,
      262,
      2723,
      318,
      1418,
      81,
      8459
    ],
    "label": "sast_risk",
    "severity": "Medium",
    "reason": "Loading data with pickle can lead to arbitrary code execution if the source is untrusted"
  },
  {
    "line": 22,
    "text": "",
    "annotation": "\ud83e\udde0 ML Signal: Use of heatmap for data visualization",
    "confidence": 0.5,
    "tokens": [],
    "start_token": 42,
    "end_token": 42,
    "annotation_tokens": [
      8582,
      100,
      254,
      10373,
      26484,
      25,
      5765,
      286,
      4894,
      8899,
      329,
      1366,
      32704
    ],
    "label": "ml_signal",
    "reason": "Use of heatmap for data visualization"
  },
  {
    "line": 26,
    "text": "",
    "annotation": "\ud83e\udde0 ML Signal: Use of qlib for quantitative research",
    "confidence": 0.5,
    "tokens": [],
    "start_token": 42,
    "end_token": 42,
    "annotation_tokens": [
      8582,
      100,
      254,
      10373,
      26484,
      25,
      5765,
      286,
      10662,
      8019,
      329,
      26610,
      2267
    ],
    "label": "ml_signal",
    "reason": "Use of qlib for quantitative research"
  },
  {
    "line": 28,
    "text": "# -",
    "annotation": "\ud83e\udde0 ML Signal: Initialization of qlib environment",
    "confidence": 0.5,
    "tokens": [
      2,
      532
    ],
    "start_token": 42,
    "end_token": 44,
    "annotation_tokens": [
      8582,
      100,
      254,
      10373,
      26484,
      25,
      20768,
      1634,
      286,
      10662,
      8019,
      2858
    ],
    "label": "ml_signal",
    "reason": "Initialization of qlib environment"
  },
  {
    "line": 31,
    "text": "sns.heatmap(data_sim)",
    "annotation": "\ud83e\udde0 ML Signal: Use of qlib's experiment management",
    "confidence": 0.5,
    "tokens": [
      82,
      5907,
      13,
      25080,
      8899,
      7,
      7890,
      62,
      14323,
      8
    ],
    "start_token": 44,
    "end_token": 54,
    "annotation_tokens": [
      8582,
      100,
      254,
      10373,
      26484,
      25,
      5765,
      286,
      10662,
      8019,
      338,
      6306,
      4542
    ],
    "label": "ml_signal",
    "reason": "Use of qlib's experiment management"
  },
  {
    "line": 35,
    "text": "",
    "annotation": "\ud83e\udde0 ML Signal: Use of PyTorch for model weight extraction",
    "confidence": 0.5,
    "tokens": [],
    "start_token": 54,
    "end_token": 54,
    "annotation_tokens": [
      8582,
      100,
      254,
      10373,
      26484,
      25,
      5765,
      286,
      9485,
      15884,
      354,
      329,
      2746,
      3463,
      22236
    ],
    "label": "ml_signal",
    "reason": "Use of PyTorch for model weight extraction"
  },
  {
    "line": 38,
    "text": "from qlib import auto_init",
    "annotation": "\u26a0\ufe0f SAST Risk (Medium): Loading data with pickle can lead to arbitrary code execution if the source is untrusted",
    "confidence": 1.0,
    "tokens": [
      6738,
      10662,
      8019,
      1330,
      8295,
      62,
      15003
    ],
    "start_token": 54,
    "end_token": 61,
    "annotation_tokens": [
      158,
      248,
      254,
      37929,
      311,
      11262,
      19602,
      357,
      31205,
      2599,
      12320,
      1366,
      351,
      2298,
      293,
      460,
      1085,
      284,
      14977,
      2438,
      9706,
      611,
      262,
      2723,
      318,
      1418,
      81,
      8459
    ],
    "label": "sast_risk",
    "severity": "Medium",
    "reason": "Loading data with pickle can lead to arbitrary code execution if the source is untrusted"
  },
  {
    "line": 46,
    "text": "",
    "annotation": "\ud83e\udde0 ML Signal: Use of pandas for concatenating dataframes",
    "confidence": 0.5,
    "tokens": [],
    "start_token": 61,
    "end_token": 61,
    "annotation_tokens": [
      8582,
      100,
      254,
      10373,
      26484,
      25,
      5765,
      286,
      19798,
      292,
      329,
      1673,
      36686,
      803,
      1366,
      37805
    ],
    "label": "ml_signal",
    "reason": "Use of pandas for concatenating dataframes"
  },
  {
    "line": 55,
    "text": "    tasks = pickle.load(f)",
    "annotation": "\ud83e\udde0 ML Signal: Use of qlib's experiment management",
    "confidence": 0.5,
    "tokens": [
      220,
      220,
      220,
      8861,
      796,
      2298,
      293,
      13,
      2220,
      7,
      69,
      8
    ],
    "start_token": 61,
    "end_token": 73,
    "annotation_tokens": [
      8582,
      100,
      254,
      10373,
      26484,
      25,
      5765,
      286,
      10662,
      8019,
      338,
      6306,
      4542
    ],
    "label": "ml_signal",
    "reason": "Use of qlib's experiment management"
  },
  {
    "line": 45,
    "text": "meta_m = meta_rec.load_object(\"model\")",
    "annotation": "\ud83e\udde0 ML Signal: Iterating over recorders to extract model parameters",
    "confidence": 1.0,
    "tokens": [
      28961,
      62,
      76,
      796,
      13634,
      62,
      8344,
      13,
      2220,
      62,
      15252,
      7203,
      19849,
      4943
    ],
    "start_token": 73,
    "end_token": 87,
    "annotation_tokens": [
      8582,
      100,
      254,
      10373,
      26484,
      25,
      40806,
      803,
      625,
      1700,
      364,
      284,
      7925,
      2746,
      10007
    ],
    "label": "ml_signal",
    "reason": "Iterating over recorders to extract model parameters"
  },
  {
    "line": 47,
    "text": "pd.DataFrame(meta_m.tn.twm.linear.weight.detach().numpy()).T[0].plot()",
    "annotation": "\ud83e\udde0 ML Signal: Loading task object to access dataset information",
    "confidence": 0.5,
    "tokens": [
      30094,
      13,
      6601,
      19778,
      7,
      28961,
      62,
      76,
      13,
      34106,
      13,
      4246,
      76,
      13,
      29127,
      13,
      6551,
      13,
      15255,
      620,
      22446,
      77,
      32152,
      3419,
      737,
      51,
      58,
      15,
      4083,
      29487,
      3419
    ],
    "start_token": 87,
    "end_token": 118,
    "annotation_tokens": [
      8582,
      100,
      254,
      10373,
      26484,
      25,
      12320,
      4876,
      2134,
      284,
      1895,
      27039,
      1321
    ],
    "label": "ml_signal",
    "reason": "Loading task object to access dataset information"
  },
  {
    "line": 49,
    "text": "pd.DataFrame(meta_m.tn.twm.linear.weight.detach().numpy()).T[0].rolling(5).mean().plot()",
    "annotation": "\u26a0\ufe0f SAST Risk (Low): Potential KeyError if expected keys are missing in the dictionary",
    "confidence": 1.0,
    "tokens": [
      30094,
      13,
      6601,
      19778,
      7,
      28961,
      62,
      76,
      13,
      34106,
      13,
      4246,
      76,
      13,
      29127,
      13,
      6551,
      13,
      15255,
      620,
      22446,
      77,
      32152,
      3419,
      737,
      51,
      58,
      15,
      4083,
      18886,
      7,
      20,
      737,
      32604,
      22446,
      29487,
      3419
    ],
    "start_token": 118,
    "end_token": 155,
    "annotation_tokens": [
      158,
      248,
      254,
      37929,
      311,
      11262,
      19602,
      357,
      20535,
      2599,
      32480,
      7383,
      12331,
      611,
      2938,
      8251,
      389,
      4814,
      287,
      262,
      22155
    ],
    "label": "sast_risk",
    "severity": "Low",
    "reason": "Potential KeyError if expected keys are missing in the dictionary"
  },
  {
    "line": 52,
    "text": "",
    "annotation": "\ud83e\udde0 ML Signal: Loading model parameters to analyze coefficients",
    "confidence": 1.0,
    "tokens": [],
    "start_token": 155,
    "end_token": 155,
    "annotation_tokens": [
      8582,
      100,
      254,
      10373,
      26484,
      25,
      12320,
      2746,
      10007,
      284,
      16602,
      44036
    ],
    "label": "ml_signal",
    "reason": "Loading model parameters to analyze coefficients"
  },
  {
    "line": 54,
    "text": "with open(\"./tasks_s20.pkl\", \"rb\") as f:",
    "annotation": "\ud83e\udde0 ML Signal: Storing model coefficients associated with test segments",
    "confidence": 0.5,
    "tokens": [
      4480,
      1280,
      7,
      1911,
      14,
      83,
      6791,
      62,
      82,
      1238,
      13,
      79,
      41582,
      1600,
      366,
      26145,
      4943,
      355,
      277,
      25
    ],
    "start_token": 155,
    "end_token": 175,
    "annotation_tokens": [
      8582,
      100,
      254,
      10373,
      26484,
      25,
      520,
      3255,
      2746,
      44036,
      3917,
      351,
      1332,
      17894
    ],
    "label": "ml_signal",
    "reason": "Storing model coefficients associated with test segments"
  },
  {
    "line": 56,
    "text": "",
    "annotation": "\ud83e\udde0 ML Signal: Concatenating series of coefficients for analysis",
    "confidence": 0.5,
    "tokens": [],
    "start_token": 175,
    "end_token": 175,
    "annotation_tokens": [
      8582,
      100,
      254,
      10373,
      26484,
      25,
      1482,
      9246,
      268,
      803,
      2168,
      286,
      44036,
      329,
      3781
    ],
    "label": "ml_signal",
    "reason": "Concatenating series of coefficients for analysis"
  },
  {
    "line": 58,
    "text": "for t in tasks:",
    "annotation": "\u2705 Best Practice: Setting index names for better readability and understanding of data",
    "confidence": 1.0,
    "tokens": [
      1640,
      256,
      287,
      8861,
      25
    ],
    "start_token": 175,
    "end_token": 180,
    "annotation_tokens": [
      26486,
      227,
      6705,
      19939,
      25,
      25700,
      6376,
      3891,
      329,
      1365,
      1100,
      1799,
      290,
      4547,
      286,
      1366
    ],
    "label": "best_practice",
    "reason": "Setting index names for better readability and understanding of data"
  },
  {
    "line": 58,
    "text": "for t in tasks:",
    "annotation": "\ud83e\udde0 ML Signal: Reshaping data for visualization",
    "confidence": 1.0,
    "tokens": [
      1640,
      256,
      287,
      8861,
      25
    ],
    "start_token": 180,
    "end_token": 185,
    "annotation_tokens": [
      8582,
      100,
      254,
      10373,
      26484,
      25,
      1874,
      71,
      9269,
      1366,
      329,
      32704
    ],
    "label": "ml_signal",
    "reason": "Reshaping data for visualization"
  },
  {
    "line": 58,
    "text": "for t in tasks:",
    "annotation": "\u2705 Best Practice: Specifying figure size for consistent visualization",
    "confidence": 1.0,
    "tokens": [
      1640,
      256,
      287,
      8861,
      25
    ],
    "start_token": 185,
    "end_token": 190,
    "annotation_tokens": [
      26486,
      227,
      6705,
      19939,
      25,
      18291,
      4035,
      3785,
      2546,
      329,
      6414,
      32704
    ],
    "label": "best_practice",
    "reason": "Specifying figure size for consistent visualization"
  },
  {
    "line": 58,
    "text": "for t in tasks:",
    "annotation": "\ud83e\udde0 ML Signal: Visualizing model coefficients using a heatmap",
    "confidence": 1.0,
    "tokens": [
      1640,
      256,
      287,
      8861,
      25
    ],
    "start_token": 190,
    "end_token": 195,
    "annotation_tokens": [
      8582,
      100,
      254,
      10373,
      26484,
      25,
      15612,
      2890,
      2746,
      44036,
      1262,
      257,
      4894,
      8899
    ],
    "label": "ml_signal",
    "reason": "Visualizing model coefficients using a heatmap"
  },
  {
    "line": 58,
    "text": "for t in tasks:",
    "annotation": "\u2705 Best Practice: Displaying the plot to the user",
    "confidence": 0.5,
    "tokens": [
      1640,
      256,
      287,
      8861,
      25
    ],
    "start_token": 195,
    "end_token": 200,
    "annotation_tokens": [
      26486,
      227,
      6705,
      19939,
      25,
      16531,
      278,
      262,
      7110,
      284,
      262,
      2836
    ],
    "label": "best_practice",
    "reason": "Displaying the plot to the user"
  },
  {
    "line": 58,
    "text": "for t in tasks:",
    "annotation": "\ud83e\udde0 ML Signal: Analyzing different experiments by calling the function with different parameters",
    "confidence": 0.5,
    "tokens": [
      1640,
      256,
      287,
      8861,
      25
    ],
    "start_token": 200,
    "end_token": 205,
    "annotation_tokens": [
      8582,
      100,
      254,
      10373,
      26484,
      25,
      16213,
      9510,
      1180,
      10256,
      416,
      4585,
      262,
      2163,
      351,
      1180,
      10007
    ],
    "label": "ml_signal",
    "reason": "Analyzing different experiments by calling the function with different parameters"
  }
]