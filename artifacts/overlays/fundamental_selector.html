<!doctype html><meta charset='utf-8'><title>fundamental_selector – overlay</title><div style='max-width:980px;margin:24px auto'><h3 style='font-family:Inter,system-ui'>File: fundamental_selector</h3><div><span style='padding:2px 6px;border-radius:10px;border:1px solid #888;margin-right:6px'>sast_risk: 0.40</span><span style='padding:2px 6px;border-radius:10px;border:1px solid #888;margin-right:6px'>ml_signal: 0.50</span><span style='padding:2px 6px;border-radius:10px;border:1px solid #888;margin-right:6px'>best_practice: 0.58</span></div><pre style='background:#0b1021;color:#ebedf5;padding:12px;border-radius:8px;overflow:auto;font-size:12px;line-height:1.4'># -*- coding: utf-8 -*-
from zvt.domain import BalanceSheet
from zvt.factors.fundamental.finance_factor import GoodCompanyFactor
from zvt.factors.target_selector import TargetSelector


class FundamentalSelector(TargetSelector):
    def init_factors(self, entity_ids, entity_schema, exchanges, codes, start_timestamp, end_timestamp, level):
        # 核心资产=(高ROE 高现金流 高股息 低应收 低资本开支 低财务杠杆 有增长)
        # 高roe 高现金流 低财务杠杆 有增长
        factor1 = GoodCompanyFactor(
            entity_ids=entity_ids,
            codes=codes,
            start_timestamp=start_timestamp,
            end_timestamp=end_timestamp,
            provider="eastmoney",
        )

        self.factors.append(factor1)

        # 高股息 低应收
        factor2 = GoodCompanyFactor(
            data_schema=BalanceSheet,
            entity_ids=entity_ids,
            codes=codes,
            columns=[BalanceSheet.accounts_receivable],
            filters=[BalanceSheet.accounts_receivable &lt;= 0.3 * BalanceSheet.total_current_assets],
            start_timestamp=start_timestamp,
            end_timestamp=end_timestamp,
            provider="eastmoney",
            col_period_threshold=None,
        )
        self.factors.append(factor2)


if __name__ == "__main__":
    selector: TargetSelector = FundamentalSelector(start_timestamp="2015-01-01", end_timestamp="2019-06-30")
    selector.run()
    print(selector.get_targets("2019-06-30"))
</pre><div style='color:#666;font-size:12px'>Threshold 0.30. Ticks on dashboard indicate predictions ≥ threshold.</div></div>
